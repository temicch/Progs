<HTML> 
<TITLE>Лабораторная работа 2.13</TITLE>
<meta charset="utf-8">
<script language="JavaScript">

function isDec(val)					// Десятичная
{
	var string = new Array();
	string = val.toString();
	string = string.toUpperCase();
	for(i = 0; i < string.length; i++)
	{
		if(string[i] < '0' || string[i] > '9')
			return 0;
	}
	return 1;
	
}

function isOctal(val)				// Восьмеричная
{
	var string = new Array();
	string = val.toString();
	string = string.toUpperCase();
	for(i = 0; i < string.length; i++)
	{
		if(string[i] < '0' || string[i] > '7')
			return 0;
	}
	return 1;
	
}

function isHex(val)					// Шестнадцатиричная
{
	var string = new Array();
	string = val.toString();
	string = string.toUpperCase();
	for(i = 0; i < string.length; i++)
	{
		if((string[i] < '0' || string[i] > '9') &&
			(string[i] < 'A' || string[i] > 'F'))
			return 0;
	}
	return 1;
	
}

function isBin(val)					// Двоичная
{
	var string = new Array();
	string = val.toString();
	string = string.toUpperCase();
	for(i = 0; i < string.length; i++)
	{
		if(string[i] < '0' || string[i] > '1')
			return 0;
	}
	return 1;
	
}

function func(val)
{
	input = document.forms.f1.inputMenu.value;
	output = document.forms.f1.outputMenu.value;
	switch(input)
	{
		case '1': 
			if(!isDec(val))
			{
				document.getElementById('error').innerHTML = '<FONT size = 1 color = red><i>Число не соответствует основанию СС</FONT>'; 
				return; 
			}
			num = parseInt(val, 10);
			break;
		case '2': 
			if(!isHex(val))
			{
				document.getElementById('error').innerHTML = '<FONT size = 1 color = red><i>Число не соответствует основанию СС</FONT>'; 
				return; 
			}
			num = parseInt(val, 16);
			break;
		case '3': 
			//if(isNaN(parseInt(val, 8)))
			if(!isOctal(val))
			{
				document.getElementById('error').innerHTML = '<FONT size = 1 color = red><i>Число не соответствует основанию СС</FONT>'; 
				return; 
			}
			num = parseInt(val, 8);
			break;
		case '4': 
			if(!isBin(val))
			{
				document.getElementById('error').innerHTML = '<FONT size = 1 color = red><i>Число не соответствует основанию СС</FONT>'; 
				return; 
			}
			num = parseInt(val, 2);
			break;
	}
	if(output == 1)
		amount = num.toString(10);
	if(output == 2)
		amount = num.toString(16);
	if(output == 3)
		amount = num.toString(8);
	if(output == 4)
		amount = num.toString(2);
	document.forms.f1.outputBox.value = amount;
	document.getElementById('error').innerHTML = ''; 
}
</script>
<BODY> 

<form name = "f1">
	<p>
		<INPUT TYPE="text" name = "inputBox" VALUE="" onKeyUp = "func(this.value)">
		<INPUT TYPE="text" name = "outputBox" VALUE="" READONLY>
	</p>
	<p>
		<SELECT NAME="inputMenu" onChange = "func(document.forms.f1.inputBox.value)">
			<OPTION VALUE="1" SELECTED> Десятичная
			<OPTION VALUE="2"> Шестнадцатиричная
			<OPTION VALUE="3"> Восьмеричная
			<OPTION VALUE="4"> Двоичная
		</SELECT>
			<SELECT NAME="outputMenu" onChange = "func(document.forms.f1.inputBox.value)">
			<OPTION VALUE="1" SELECTED> Десятичная
			<OPTION VALUE="2"> Шестнадцатиричная
			<OPTION VALUE="3"> Восьмеричная
			<OPTION VALUE="4"> Двоичная
		</SELECT>
	</p>
</form>
	<span id="error">
	</span>

</BODY>
</HTML>