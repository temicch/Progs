<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//RU">
<HTML>
<HEAD>
<TITLE>Теория к лаб. работе N 2.15</TITLE>
<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=Windows-1251">
<link REL="stylesheet" TYPE="text/css" HREF="mstyle.css">
</HEAD>
<BODY>
<h2>Защита Web-страниц</h2>
<p>В самой Web-странице нет ничего тайного. Все, кто более или менеее разбирается в компьютерах, могут с помощью нескольких щелчков мыши увидеть код HTML, содержащий среди прочего и сценарии JavaScript. И хотя почти невозможно предотвратить просмотр кода страницы, вполне реально блокировать некоторым компьютерным асам доступ к JavaScript.
<h3>Сокрытие кода страницы</h3>
<p>Каждый Web-дизайнер непременно просматривал код чужой Web-страницы путем нажатия правой кнопки мыши и выбора функции <b>Просмотр HTML-кода</b> (View Source) в контекстном меню. На самом деле подобный способ часто используется Web-дизайнерами для изучения новых способов создания страниц с помощью HTML и JavaScript.
Но некоторые Web-дизайнеры отнюдь не приходят в восторг от того, что их коллеги просматривают код и вставляют его части в собственные страницы без указания автора. Это особенно касается сценариев JavaScript, так как их создание отнимает много времени и сил по сравнению с написанием HTML-кода самой страницы.
<p>По правде говоря, спрятать код HTML и JavaScript практически невозможно, так как опытный разработчик обязательно сможет написать программу, которая под видом браузера обратится к Web-серверу за определенной страницей, скопирует ее на жесткий диск, где ее вполне реально просмотреть с помощью редактора. Более того, код страницы, включая JavaScrip, кэшируется, то есть сохраняется на диске во временной папке, где хранятся просмотренные пользователем Web-страницы. Умудренный опытом пользователь может свободно получить доступ к этому хранилищу и просмотреть содержимое нужной страницы.
<p>С другой стороны, разработчик может установить препятствия на пути потенциального охотника за чужим кодом. Например, можно отключить контекстное меню, появляющееся при щелчке правой кнопкой мыши, что заблокирует доступ посетителя к функции <b>Просмотр HTML-кода</b>. Но это не самый лучший способ, так как посетитель может свободно выполнить то же самое действие через главное меню браузера. Помимо этого можно расположить JavaScript на Web-сервере, а не встраивать его внутрь страницы. Браузер будет вызывать сценарий JavaScript с Web-сервера каждый раз, когда в нем возникнет необходимость. С помощью этого метода JavaScript будет недоступен для посетителя, даже если последний попробует просмотреть код страницы.
<i>(Однако в кэше некоторых браузеров такой файл все равно сохраняется и его содержимое можно просмотреть)</i>
<h3>Отключение контекстного меню</h3>
<p>Далее показано, как можно отключить контекстное меню, возникающее при щелчке правой кнопкой мыши, в тот момент, когда браузер отображает страницу. Все действия происходят через сценарий JavaScript, который определен в теге &LT;head> этой страницы.
<p>Для начала нужно описать функцию, которая при нажатии на правую кнопку мыши будет выводить сообщение о нарушении правил безопасности. Для этого можно воспользоваться такой строчкой:
<table><tr><td bgcolor=aqua><xmp>
alert("Security Violation!");
</xmp></td></tr></table>
<p>Далее нужно вызвать эту функцию, когда вызывается контекстное меню (по нажатию правой кнопки мыши или соответствующей клавиши на клавиатуре). Сделать это можно следующим образом:
<table><tr><td bgcolor=aqua><xmp>
document.oncontextmenu=new Function('имя_функции(); return false');
</xmp></td></tr></table>
<p>Эту строчку нужно писать просто внутри тегов &LT;script> и &LT;/script>, а не в отдельной функции. <i>document.oncontextmenu</i> определяет событие, которое будет возникать при попытке вызова контекстного меню. Здесь при этой попытке выполняется функция <i>new Function</i>, которая в свою очередь выполняет описанную выше функцию вывода сообщения о нарушении правил безопасности и обязательно возвращает значение <i>false</i>. Если этого не сделать, то после сообщения контекстное меню все равно выведется.
<h3>Сокрытие кода сценария JavaScript</h3>
<p>Спрятать сценарий JavaScript от глаз посетителя возможно, если поместить его в отдельный файл, находящийся на Web-сервере. Этот файл должен иметь расширение .js. Затем браузер обратится к этому файлу в тот момент, когда он найдет элемент JavaScript на Web-странице. Просмотрев код страницы, можно найти ссылку на этот дополнительный файл с расширением .js, но самого сценария JavaScript там не будет.
<p><i><b>Совет.</b> Защита сценария JavaScript - не единственная и даже не главная причина, по которой код JavaScript имеет смысл поместить в дополнительный файл. Основная цель в данном случае состоит в том, чтобы встроить код JavaScript в несколько страниц, не перепечатывая его каждый раз. Все изменения, сделанные в коде JavaScript, расположенном в отдельном файле, будут автоматически применяться к страницам, в которых есть ссылка на этот файл.</i>
<p>Далее показано, как создать и использовать сценарий JavaScript, расположенный в отдельном файле. Для начала нужно сообщить браузеру, что содержимое JavaScript находится в отдельном файле на Web-сервере, а не встроено в страницу. Это делается путем указания имени файла, содержащего сценарий JavaScript, в атрибуте <i>src</i> тега <i>&LT;script>.</i> Вот пример:
<table><tr><td bgcolor=aqua><xmp>
<script src="MyJavaScripts.js" language="JavaScript" type="text/javascript">
</xmp></td></tr></table>
<p>Затем нужно написать пустые определения для каждой функции, которая находится в файле JavaScript. Это может показаться странным, но некоторые старые версии браузеров не умеют использовать дополнительные файлы с JavaScript и отобразят сообщение об ошибке, когда будет вызываться функция JavaScript, не указанная на странице. Создание пустых функций предотвращает появление данной ошибки, так как функция определена на странице. Но сообщение об ошибке все-таки может появиться, так как правильное определение функции не будет выполняться.
</BODY>
</HTML>

